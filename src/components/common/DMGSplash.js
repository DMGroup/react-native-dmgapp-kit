/** * 闪屏 */'use strict';import React, { Component } from 'react';import {  View,  Image,  StyleSheet,  Dimensions,  Animated,  TouchableOpacity,} from 'react-native';import { connect } from 'react-redux';import { Actions } from 'react-native-router-flux';var { height, width } = Dimensions.get( 'window' );class DmgSplash extends Component {  constructor( props ) {    super( props );    this.state = {      time: 1,      fadeAnim: new Animated.Value( 1 ), // 透明度为0    };  }  componentDidMount() {    this.timer = setInterval(      () => {        this.setState({          time: this.state.time - 1,        });        if ( this.state.time == 0 ) {          Animated.timing(       // 使用timing过渡动画            this.state.fadeAnim, // 开启动画的值            {              toValue: 0,        // 目标值              duration: 0,    // 配置延续时间            },          ).start();             // 开启动画        }        if ( this.state.fadeAnim._value == 0) {          this.timer && clearTimeout(this.timer);          Actions.tabView1();          return null;        }      }, 1000 );  }  render() {    const { systemInfo } = this.props;    if (systemInfo.payload.code != 0) {      Actions.tabView1();      return null;    }    return (      <Animated.View style={{ opacity: this.state.fadeAnim }}>        <Image style={ styles.backImage } source={{ uri: systemInfo.payload.data.splash.icon }} >          <TouchableOpacity style={ styles.jumpButton }                            onPress={ Actions.tabView1 }          >            跳过{ this.state.time }          </TouchableOpacity>        </Image>      </Animated.View>    );  }}const styles = StyleSheet.create( {  backImage: {    flex: 1,    width: width,    height: height,    resizeMode: 'cover',  },  jumpButton: {    width: 60,    height: 30,    marginTop: 30,    paddingTop: 5,    right: 10,    position: 'absolute',    textAlign: 'center',    fontSize: 14,    color: '#000',    borderWidth: 1,    borderColor: '#000'  }} )export default connect(  ( { systemInfo } ) => ({ systemInfo }))( DmgSplash )